# lower priority on top, higher priority expression on bottom

# make a glossary for this (expr, (), ? = optional, * = 0 or more, |)

expr            : keywords:var identifier eq expr
                : comp-expr ((keyword: and|keyword: or) comp-expr)*

comp-expr       : not comp-expr
                : arith-expr ((ee|lt|gt|lte|gte) arith-expr)*

arith-expr      : term ((plus|minus) term)*

term            : factor ((mul|div) factor)*

factor          : (plus|minus) factor
                : power

power           : call (pow factor)*

call            : atom (lparen (expr (comma expr)*)? rparen)?

atom            : int|float|identifier
                : lparen expr rparen
                : if-expr
                : for-expr
                : while-expr
                : func-def

if-expr         : keyword:if expr keyword:then expr
                 (keyword:elif expr keyword:then expr)*
                 (keyword:else expr)?

for-expr        : keyword:for identifier eq expr keyword:to expr
                 (keyword: step expr)? keyword:then expr

while-expr      : keyword:while expr keyword:then expr

func-def        : keyword:fun identifier?
                : lparen (identifier (comma identifier)*)? rparen
                : arrow expr